(()=>{var n=Object.defineProperty;var c=(i,s,e)=>s in i?n(i,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[s]=e;var r=(i,s,e)=>(c(i,typeof s!="symbol"?s+"":s,e),e);var o=class extends HTMLElement{constructor(){super();r(this,"setTheme",function(e){(!e||this.keys.includes(e)===!1)&&(e=""),document.documentElement.style.setProperty("--anim-f","0"),e?(document.documentElement.setAttribute("data-theme",e),localStorage.setItem(this.store,e)):(document.documentElement.removeAttribute("data-theme"),localStorage.removeItem(this.store)),requestAnimationFrame(()=>{setTimeout(()=>document.documentElement.style.removeProperty("--anim-f"))}),document.querySelectorAll("[data-theme-set]").forEach(function(t){t.setAttribute("aria-pressed",(t.getAttribute("data-theme-set")===e).toString())})});r(this,"getTheme",function(){let e=localStorage.getItem(this.store);if(!e)return!1;if(this.keys.includes(e)===!1){let t=window.matchMedia("(prefers-color-scheme:dark)").matches?"dark":"light";return this.defaults[t]}return e});this.store=window.themeStore,this.keys=window.themeKeys,this.defaults={light:this.getAttribute("light"),dark:this.getAttribute("dark")},this.setTheme(this.getTheme()),this.addEventListener("click",this),this.addEventListener("keyup",this)}handleEvent(e){if(e.type==="click"){let t=e.target.closest("[data-theme-set]");if(t){let a=t.getAttribute("aria-pressed")==="true";this.setTheme(a?!1:t.getAttribute("data-theme-set"))}}if(e.type==="keyup"&&e.key==="Escape"){let t=document.querySelector(`[aria-controls=${this.id}]`);if(!t)return;t.setAttribute("aria-pressed","false"),t.focus()}}};customElements.define("theme-picker",o);})();
