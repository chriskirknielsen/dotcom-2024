(()=>{var r=class extends HTMLElement{spawn(e,t){return Object.assign(document.createElement(e),t)}shuffle(e){for(let t=e.length-1;t>0;t-=1){let i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}constructor(){super(),this.itemsList=this.shuffle(Array.from(this.querySelectorAll('[data-expander="content-items"] > li')).map(n=>[n.getAttribute("data-item-emoji"),n.textContent]));let e=this.querySelector('[data-expander="wrapper"]');this.blockDiv=this.spawn("div",{className:e.className});let t=this.querySelector('[data-expander="trigger"]'),i=Array.from(t.children);this.ctaButton=this.spawn("button",{className:t.className}),this.ctaButton.style.setProperty("--btn-justify-content",t.style.getPropertyValue("--btn-justify-content"));let h=this.querySelector('[data-expander="content"]');if(this.outputContainer=this.spawn("div",{className:h.className,hidden:!0,innerHTML:'<p data-item="wrap"><span data-item="emoji" aria-hidden="true">&nbsp;</span>&ensp;<span data-item="content">&nbsp;</span></p>'}),i.length>0?this.ctaButton.append(...i):this.ctaButton.innerText=t.innerText,this.blockDiv.appendChild(this.ctaButton),this.blockDiv.appendChild(this.outputContainer),e.replaceWith(this.blockDiv),this.currentItemIndex=-1,this.transitionTime=200,document.startViewTransition){let n=this.spawn("style",{textContent:`html { view-transition-name: none; }::view-transition, ::view-transition-group(root) { pointer-events: none !important; }::view-transition-old(content), ::view-transition-new(content) { height: 100%; object-fit: none; overflow: clip; }::view-transition-group(emoji), ::view-transition-group(content) { animation-duration: ${this.transitionTime}ms; }`});document.head.append(n)}this.ctaButton.addEventListener("click",()=>{let n=window.matchMedia("(prefers-reduced-motion: reduce)").matches,c=(this.currentItemIndex+1)%this.itemsList.length,m=this.itemsList[c];(this.outputContainer.hidden||this.currentItemIndex===-1)&&(this.outputContainer.hidden=!1,this.blockDiv.setAttribute("data-open","true"));let s=this.outputContainer.querySelector('[data-item="wrap"]'),d=this.outputContainer.querySelector('[data-item="emoji"]'),a=this.outputContainer.querySelector('[data-item="content"]');document.startViewTransition&&(d.style.viewTransitionName="emoji",a.style.viewTransitionName="content");let o=()=>{d.innerText=m[0],a.innerText=m[1]};if(!n&&document.startViewTransition&&this.currentItemIndex>-1)document.startViewTransition(()=>o());else if(a.innerText.length<=1||n)o();else{s.getAnimations().forEach(l=>l.finish());let u=s.animate({opacity:[1,0],translate:["0 0","0 0.25em"]},{duration:this.transitionTime,iterations:1,easing:"ease-in"}).finished,w=s.animate({opacity:[0,1],translate:["0 -0.25em","0 0"]},{delay:this.transitionTime,duration:this.transitionTime,iterations:1,easing:"ease-out"}).finished;u.then(()=>o())}this.currentItemIndex=c})}};customElements.define("cycling-expander",r);})();
