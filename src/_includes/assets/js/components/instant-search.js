(()=>{var H=Object.defineProperty;var I=(t,r,s)=>r in t?H(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s;var L=(t,r,s)=>I(t,typeof r!="symbol"?r+"":r,s);function d(t){return t.replace(/(‘|’)/,"'")}function q(t){switch(t){case"*":return"All";case"_fonts":return"Typeface";case"_designs":return"Design";case"_projects":return"Project";case"_pages":return"Page";case"_posts":default:return"Blogpost"}}var y=class extends HTMLElement{constructor(){super();L(this,"hasRunOnce",!1);this.database=fetch("/search.json").then(s=>s.json()),this.lastSearch=""}connectedCallback(){let s=this.dataset.searchInput,A=this.querySelector("form"),m=this.querySelector(`[name="${s}"]`),i=this.querySelector("[data-results-list]"),v=this.querySelector("template"),E=this.querySelector("[data-results-count]"),u=this.querySelector("[data-results-filter]"),w=async()=>this.database,T=async()=>{let e=d(m.value.toLowerCase().trim());if(e.length<1)return;switch(e){case"11ty":e="eleventy";break;case"javascript":e="js";break}if(this.lastSearch===e)return;this.hasRunOnce||this.firstRunCallback(),i.innerHTML='<tr><td colspan="3">Loading\u2026</td></tr>',u.innerHTML='<option value="*">All</option>';let a=(await w()).filter(l=>d(l.title.toLowerCase()).includes(e)||d(l.summary.toLowerCase()).includes(e)||d(l.tags.join(" ").toLowerCase()).includes(e));this.lastSearch=e,setTimeout(()=>{if(u.disabled=a.length===0,a.length===0){E.innerText="(0)",i.innerHTML='<tr><td colspan="3">No results found \u{1F622}</td></tr>';return}let l=new DocumentFragment;i.innerHTML="";let b=new Set;a.forEach(n=>{let o=n.type,c=v.content.cloneNode(!0),C=c.querySelector("[data-result-type]"),j=c.querySelector('[data-result-slot="type"]'),f=c.querySelector('[data-result-slot="date"]'),p=c.querySelector('[data-result-slot="link"]'),g=c.querySelector('[data-result-slot="lang"]'),S=new Date(n.date).toISOString().split("T").shift(),x=q(o);b.add(o),C.setAttribute("data-result-type",o),j.innerText=`${x}`,p.setAttribute("href",n.url),p.setAttribute("hreflang",n.lang),p.innerHTML=n.title,["_posts","_designs"].includes(o)?(f.setAttribute("datetime",S),f.innerText=S):f.parentElement.innerHTML="",n.lang!=="en"?g.innerText=`(${n.lang})`:g.hidden=!0,l.append(c)}),E.innerText=`(${a.length})`,i.append(l),Array.from(b).sort().forEach(n=>{let o=Object.assign(document.createElement("option"),{value:n,innerText:q(n)});u.appendChild(o)})},100)};m.addEventListener("blur",function(e){T()}),A.addEventListener("submit",function(e){return e.preventDefault(),T(),!1}),u.addEventListener("change",function(e){let h=u.value||"*";Array.from(i.querySelectorAll("[data-result-type]")).forEach(a=>{a.hidden=h!=="*"&&a.getAttribute("data-result-type")!==h})})}firstRunCallback(){Array.from(this.querySelectorAll("[data-show-on-first-run]")).forEach(s=>{s.hidden=!1}),this.hasRunOnce=!0}};customElements.define("instant-search",y);})();
