(()=>{var x=Object.defineProperty;var H=(t,r,e)=>r in t?x(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var g=(t,r,e)=>(H(t,typeof r!="symbol"?r+"":r,e),e);function d(t){return t.replace(/(‘|’)/,"'")}function S(t){switch(t){case"*":return"All";case"_fonts":return"Typeface";case"_designs":return"Design";case"_projects":return"Project";case"_pages":return"Page";case"_posts":default:return"Blogpost"}}var p=class extends HTMLElement{constructor(){super();g(this,"hasRunOnce",!1);this.database=fetch("/search.json").then(e=>e.json())}connectedCallback(){let e=this.dataset.searchInput,q=this.querySelector("form"),L=this.querySelector(`[name="${e}"]`),i=this.querySelector("[data-results-list]"),A=this.querySelector("template"),m=this.querySelector("[data-results-count]"),u=this.querySelector("[data-results-filter]"),v=async()=>this.database,w=async()=>{let s=d(L.value.toLowerCase().trim());if(s.length<1)return;switch(s){case"11ty":s="eleventy";break;case"javascript":s="js";break}this.hasRunOnce||this.firstRunCallback(),i.innerHTML="<li>Loading\u2026</li>",u.innerHTML='<option value="*">All</option>';let a=(await v()).filter(o=>d(o.title.toLowerCase()).includes(s)||d(o.summary.toLowerCase()).includes(s)||d(o.tags.join(" ").toLowerCase()).includes(s));setTimeout(()=>{if(u.disabled=a.length===0,a.length===0){m.innerText="(0)",i.innerHTML="<li>No results found \u{1F622}</li>";return}let o=new DocumentFragment;i.innerHTML="";let E=new Set;a.forEach(n=>{let c=n.type,l=A.content.cloneNode(!0),C=l.querySelector("[data-result-type]"),j=l.querySelector('[data-result-slot="type"]'),_=l.querySelector('[data-result-slot="info"]'),f=l.querySelector("time[datetime]"),y=l.querySelector("a[href]"),T=l.querySelector('[data-result-slot="lang"]'),b=new Date(n.date).toISOString().split("T").shift(),I=S(c);E.add(c),C.setAttribute("data-result-type",c),j.innerText=`${I}`,y.setAttribute("href",n.url),y.setAttribute("hreflang",n.lang),y.innerHTML=n.title,c==="_posts"?(f.setAttribute("datetime",b),f.innerText=b):f.hidden=!0,n.lang!=="en"?T.innerText=`(${n.lang})`:T.hidden=!0,o.append(l)}),m.innerText=`(${a.length})`,i.append(o),Array.from(E).sort().forEach(n=>{let c=Object.assign(document.createElement("option"),{value:n,innerText:S(n)});u.appendChild(c)})},100)};q.addEventListener("submit",function(s){return s.preventDefault(),w(),!1}),u.addEventListener("change",function(s){let h=u.value||"*";Array.from(i.querySelectorAll("[data-result-type]")).forEach(a=>{a.hidden=h!=="*"&&a.getAttribute("data-result-type")!==h})})}firstRunCallback(){Array.from(this.querySelectorAll("[data-show-on-first-run]")).forEach(e=>{e.hidden=!1}),this.hasRunOnce=!0}};customElements.define("instant-search",p);})();
