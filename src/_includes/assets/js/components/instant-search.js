(()=>{var I=Object.defineProperty;var H=(t,r,e)=>r in t?I(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var T=(t,r,e)=>(H(t,typeof r!="symbol"?r+"":r,e),e);function d(t){return t.replace(/(‘|’)/,"'")}function S(t){switch(t){case"*":return"All";case"_fonts":return"Typeface";case"_designs":return"Design";case"_projects":return"Project";case"_pages":return"Page";case"_posts":default:return"Blogpost"}}var p=class extends HTMLElement{constructor(){super();T(this,"hasRunOnce",!1);this.database=fetch("/search.json").then(e=>e.json())}connectedCallback(){let e=this.getAttribute("search-input"),q=this.querySelector("form"),A=this.querySelector(`[name="${e}"]`),c=this.querySelector("[data-results-list]"),L=this.querySelector("template"),m=this.querySelector("[data-results-count]"),u=this.querySelector("[data-results-filter]"),v=async()=>this.database,w=async()=>{let n=d(A.value.toLowerCase().trim());if(n.length<1)return;switch(n){case"11ty":n="eleventy";break;case"javascript":n="js";break}this.hasRunOnce||this.firstRunCallback(),c.innerHTML="<li>Loading\u2026</li>",u.innerHTML='<option value="*">All</option>';let a=(await v()).filter(o=>d(o.title.toLowerCase()).includes(n)||d(o.summary.toLowerCase()).includes(n)||d(o.tags.join(" ").toLowerCase()).includes(n));setTimeout(()=>{if(u.disabled=a.length===0,a.length===0){m.innerText="(0)",c.innerHTML="<li>No results found \u{1F622}</li>";return}let o=new DocumentFragment;c.innerHTML="";let b=new Set;a.forEach(s=>{let i=s.type,l=L.content.cloneNode(!0),C=l.querySelector("[data-result-type]"),j=l.querySelector('[data-result-slot="type"]'),_=l.querySelector('[data-result-slot="info"]'),f=l.querySelector("time[datetime]"),y=l.querySelector("a[href]"),g=l.querySelector('[data-result-slot="lang"]'),E=new Date(s.date).toISOString().split("T").shift(),x=S(i);b.add(i),C.setAttribute("data-result-type",i),j.innerText=`${x}`,y.setAttribute("href",s.url),y.setAttribute("hreflang",s.lang),y.innerHTML=s.title,i==="_posts"?(f.setAttribute("datetime",E),f.innerText=E):f.hidden=!0,s.lang!=="en"?g.innerText=`(${s.lang})`:g.hidden=!0,o.append(l)}),m.innerText=`(${a.length})`,c.append(o),Array.from(b).sort().forEach(s=>{let i=Object.assign(document.createElement("option"),{value:s,innerText:S(s)});u.appendChild(i)})},100)};q.addEventListener("submit",function(n){return n.preventDefault(),w(),!1}),u.addEventListener("change",function(n){let h=u.value||"*";Array.from(c.querySelectorAll("[data-result-type]")).forEach(a=>{a.hidden=h!=="*"&&a.getAttribute("data-result-type")!==h})})}firstRunCallback(){Array.from(this.querySelectorAll("[data-show-on-first-run]")).forEach(e=>{e.hidden=!1}),this.hasRunOnce=!0}};customElements.define("instant-search",p);})();
