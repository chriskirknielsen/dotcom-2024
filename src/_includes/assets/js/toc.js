(()=>{document.addEventListener("DOMContentLoaded",()=>{let o=Array.from(document.querySelectorAll(".toc ~ :is(h2, h3, h4)"));if(o.length===0)return;let c=e=>e.closest(".toc-list li").setAttribute("data-current",""),m=e=>e.closest(".toc-list li").removeAttribute("data-current"),a=e=>document.querySelector(`.toc-list a[href="#${e.id}"]`),l=()=>Math.floor(document.body.clientHeight),n=new Set,d,r,u=l();function f(e){let h=new IntersectionObserver(s=>{s.forEach(t=>{t.isIntersecting?n.add(t.target):n.delete(t.target)});let g=Array.from(n.values()).sort((t,i)=>o.indexOf(i)-o.indexOf(t))[0];g&&o.forEach(t=>{let i=a(t);t===g?c(i):m(i)})},{rootMargin:`${e}px 0px -33% 0px`,threshold:1});return o.forEach(s=>h.observe(s)),h}c(a(o[0])),r=f(u),window.addEventListener("resize",()=>{clearTimeout(d),d=setTimeout(()=>{let e=l();u!==e&&(r&&r.disconnect(),r=f(e))},200)})});})();
