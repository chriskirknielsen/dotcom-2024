(()=>{function p(a,e){return`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24" class="gaming-details-trophies-icon | inline-icon">
		<title>${e} trophies</title>
		<use xlink:href="#${a}" width="24" height="24"></use>
	</svg>`}function u(a,e){return a?`<ul class="gaming-details-trophies | inline-list" data-flow="run-in">
		${Object.keys(a).filter(t=>a[t]>0).map(t=>`<li><span class="gaming-details-trophies-badge" data-trophy-level="${t}">${p(e,t)} ${a[t]}</span></li>`).join("")}
	</ul>`:""}var c=(a,e)=>Array.from(document.querySelectorAll(a)).forEach(e),i=0,d=["I'm sorry, but that's not how that works.","If I have time I'll finish it.","Listen, if it's that great, you can let me know and I'll add it to my backlog.","Oh look, I'm literally about to beat the final level!","Screw it. You win. I'm done."];document.addEventListener("DOMContentLoaded",function(a){document.querySelector("[data-gaming-toolbar]").hidden=!1,c(".gaming-spine-label",e=>{let t=document.createElement("button");e.getAttributeNames().forEach(r=>t.setAttribute(r,e.getAttribute(r))),t.type="button",t.classList.add("button-reset"),t.innerHTML=e.innerHTML,e.replaceWith(t)})});document.addEventListener("click",function(a){let e;if(e=a.target.closest("[data-games-toggled]"))e.dataset.gamesToggled=String(e.dataset.gamesToggled!=="true"),c("details",t=>t.open=e.dataset.gamesToggled==="true");else if(e=a.target.closest(".gaming-spine-label")){let t=JSON.parse(e.closest("[data-game]").getAttribute("data-game")),r=document.getElementById("gaming-details-dialog"),s=document.getElementById("gaming-details-dialog-template"),g=s.getAttribute("data-trophy-svg-id"),l=s.content.cloneNode(!0),m="gaming-details-dialog-title";if(l.querySelectorAll("[data-slot-show], [data-slot]:not([data-slot-show] *)").forEach(o=>{let h=o.getAttribute("data-slot-show")||o.getAttribute("data-slot"),n=t[h];o.hidden=Array.isArray(n)?n.length===0:!n}),["title","edition","region","platform","dlc","year"].forEach(o=>{l.querySelector(`[data-slot="${o}"]`).innerText=t[o]}),l.querySelector('[data-slot="title"]').setAttribute("id",m),l.querySelector('[data-slot-computed="format"]').innerText=t.discs?t.discs>1?`${t.discs} discs`:"disc":"digital",t.completed===null?(l.querySelector('[data-slot-checkbox="completed"]').indeterminate=!0,l.querySelector('[data-slot-computed="completed"]').innerText="Partial"):(l.querySelector('[data-slot-checkbox="completed"]').checked=t.completed,l.querySelector('[data-slot-computed="completed"]').innerText=t.completed?"Yes":"No"),l.querySelector('[data-slot-checkbox="completed"]').setAttribute("data-clean-value",String(t.completed)),l.querySelector('[data-slot-computed="subItems"]').innerHTML=t.subItems.length>0?`<ul aria-label="Included games">${t.subItems.map(o=>`<li class="gaming-details-subitem">
								<p class="gaming-details-subitem-main">
									<input type="checkbox" aria-hidden="true" ${o.completed?"checked":""} readonly class="gaming-details-subitem-checkbox">
									<span class="gaming-details-subitem-label">
										${o.title}
										<span class="visually-hidden">${o.completed?"(completed)":"(not completed)"}</span>
									</span>
								</p>
								${o.trophyEarned?u(o.trophyEarned,g):""}
							</li>`).join("")}</ul>`:"",t.trophyIcon){let o=parseInt(l.querySelector('[data-slot-img="trophyIcon"]').getAttribute("height"),10);l.querySelector('[data-slot-img="trophyIcon"]').src=`https://res.cloudinary.com/chriskirknielsen/image/fetch/c_fit,h_${o}/${encodeURI(t.trophyIcon)}`,l.querySelector('[data-slot-img="trophyIcon"]').setAttribute("width",t.platform==="PS5"?o:o*(320/176))}l.querySelector('[data-slot-computed="trophyEarned"]').innerHTML=t.trophyEarned?`${t.trophyProgress}%: ${u(t.trophyEarned,g)}`:"",Array.from(r.childNodes).forEach(o=>o.remove()),r.append(l),r.setAttribute("aria-labelledby",m);try{r.showModal()}catch{r.setAttribute("open","")}}else if(e=a.target.closest("[data-hide-game-info]"))try{e.closest("dialog").close()}catch{dialog.removeAttribute("open")}else{if(e=a.target.closest('[type="checkbox"][readonly]'))return a.preventDefault(),!1;if(e=a.target.closest('[data-slot-checkbox="completed"]')){if(e.getAttribute("data-clean-value")==="true"){a.preventDefault(),alert("I wish I could unbeat a game and relive it for the first time. Alas, such delights are not meant for us mere mortals\u2026");return}if(i<d.length&&alert(d[i]),i>=d.length-1){i++,a.target.parentElement.querySelector('[data-slot-computed="completed"]').innerText=a.target.checked?"Yes":"No";return}i++,a.preventDefault()}}});document.addEventListener("change",function(a){let e;if(e=a.target.closest("[data-games-sizing]")){let t=e.value||"md",r={sm:"0.75em",md:"1em",lg:"1.25em"};c("[data-gaming-platform]",s=>s.style.fontSize=r[t])}});})();
