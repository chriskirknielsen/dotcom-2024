(()=>{var M="ease-in",A="ease-out";function L(e,a){return`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24" class="gaming-details-trophies-icon | inline-icon">
		<title>${a} trophies</title>
		<use xlink:href="#${e}" width="24" height="24"></use>
	</svg>`}function w(e,a){return e?`<ul class="gaming-details-trophies | inline-list" data-flow="run-in">
		${Object.keys(e).filter(t=>e[t]>0).map(t=>`<li><span class="gaming-details-trophies-badge" data-trophy-level="${t}">${L(a,t)} ${e[t]}</span></li>`).join("")}
	</ul>`:""}function b(e,a,t=document){return Array.from(t.querySelectorAll(e)).forEach(a)}function S(e,a=0){h=e.closest(".gaming-box-wrap");let t=JSON.parse(e.closest("[data-game]").getAttribute("data-game")),o=document.getElementById("gaming-details-dialog"),s=document.getElementById("gaming-details-dialog-template"),u=s.getAttribute("data-trophy-svg-id"),n=s.content.cloneNode(!0),r="gaming-details-dialog-title",c="disc";switch(t.platform){case"PSV":case"Switch":{c="cartridge";break}}if(b("[data-slot-show], [data-slot]:not([data-slot-show] *)",i=>{let l=i.getAttribute("data-slot-show")||i.getAttribute("data-slot"),d=t[l];i.hidden=Array.isArray(d)?d.length===0:!d},n),["title","edition","region","platform","dlc","year"].forEach(i=>{n.querySelector(`[data-slot="${i}"]`).innerText=t[i]}),n.querySelector('[data-slot="title"]').setAttribute("id",r),n.querySelector('[data-slot-computed="format"]').innerText=t.discs?t.discs>1?`${t.discs} ${c}s`:c:"digital",t.rating){let i=n.querySelector("#svg-star-icon"),l=parseInt(i.getAttribute("width"),10),d=parseInt(i.getAttribute("height"),10),m=i.getAttribute("viewBox").split(" ").map(y=>parseFloat(y)),f=`${t.rating} / 5`,$=`<span class="visually-hidden">${f}</span>`,k=`<svg
				xmlns="http://www.w3.org/2000/svg"
				width="${l*5}"
				height="${d}"
				viewBox="${m.map((y,I)=>I===2?y*5:y).join(" ")}"
				class="inline-icon inline-icon--center linecap-auto"
				aria-hidden="true"
			>
				<title>${f}</title>
				<defs>
					<pattern id="star-pattern-stroke" x="0" y="0" width="20%" height="100%" fill="none" stroke="currentColor">
						${i.innerHTML}
					</pattern>
					<pattern id="star-pattern-fill" x="0" y="0" width="20%" height="100%" fill="currentColor" patternUnits="userSpaceOnUse">
						${i.innerHTML}
					</pattern>
				</defs>
				<rect fill="url(#star-pattern-stroke)" width="${m[2]*5}" height="${m[3]}" />
				<rect fill="url(#star-pattern-fill)" width="${m[2]*t.rating}" height="${m[3]}" />
			</svg>`;n.querySelector('[data-slot-computed="rating"]').innerHTML=`${$}${k}`}if(t.completed===null?(n.querySelector('[data-slot-checkbox="completed"]').indeterminate=!0,n.querySelector('[data-slot-computed="completed"]').innerText="Partially"):(n.querySelector('[data-slot-checkbox="completed"]').checked=t.completed,n.querySelector('[data-slot-computed="completed"]').innerText=t.completed?"Yes":"No"),n.querySelector('[data-slot-checkbox="completed"]').setAttribute("data-clean-value",String(t.completed)),n.querySelector('[data-slot-computed="subItems"]').innerHTML=t.subItems.length>0?`<h3 class="visually-hidden" id="gaming-library-subitems-heading">Included games</h3>
				<ul aria-labelledby="gaming-library-subitems-heading">${t.subItems.map(i=>`<li class="gaming-details-subitem">
								<p class="gaming-details-subitem-main">
									<input type="checkbox" aria-hidden="true" ${i.completed?"checked":""} readonly class="gaming-details-subitem-checkbox">
									<span class="gaming-details-subitem-label">
										${i.title}
										<span class="visually-hidden">${i.completed?"(completed)":"(not completed)"}</span>
									</span>
								</p>
								${i.trophyEarned?w(i.trophyEarned,u):""}
							</li>`).join("")}</ul>`:"",t.trophyIcon){let i=parseInt(n.querySelector('[data-slot-img="trophyIcon"]').getAttribute("height"),10),l=["PS3","PS4","PSV"].includes(t.platform)?i*(320/176):i;n.querySelector('[data-slot-img="trophyIcon"]').src=t.trophyIcon,n.querySelector('[data-slot-img="trophyIcon"]').setAttribute("width",l)}n.querySelector('[data-slot-computed="trophyEarned"]').innerHTML=t.trophyEarned?`<span class="gaming-details-trophies-percentage">${Object.values(t.trophyEarned).reduce((i,l)=>i+l,0)} <span${t.trophyProgress===100?' class="fontWeight-bold"':""}>(${t.trophyProgress}%)</span>:</span> ${w(t.trophyEarned,u)}`:"",Array.from(o.childNodes).forEach(i=>i.remove()),o.append(n),o.setAttribute("aria-labelledby",r),t.boxart?o.style.setProperty("--cover-url",`url(${t.boxart.url})`):o.style.setProperty("--cover-url","url(#null)");try{o.showModal()}catch{o.setAttribute("open","")}let g=()=>{o.style.opacity="",o.style.translate=""};window.matchMedia("(prefers-reduced-motion: no-preference)").matches&&a!==0?(o.getAnimations().forEach(i=>i.finish()),o.animate([{translate:`${a*160}px 0`,opacity:0},{translate:"0 0",scale:1,opacity:1}],{duration:300/2,easing:A}).finished.then(g)):g()}var p=0,v=["I\u2019m sorry, but that's not how that works.","If I have time I\u2019ll finish it.","Listen, if it's that great, you can let me know and I\u2019ll add it to my backlog.","Oh look, I\u2019m literally about to beat the final level!","Screw it. You win. I\u2019m done."],h=null,x=()=>{h=null,document.getElementById("gaming-details-dialog").style.removeProperty("--cover-url")};document.addEventListener("DOMContentLoaded",function(e){document.querySelector("[data-gaming-toolbar]").hidden=!1,b(".gaming-box",a=>{let t=document.createElement("button");a.getAttributeNames().forEach(o=>t.setAttribute(o,a.getAttribute(o))),t.type="button",t.classList.add("button-reset"),Array.from(a.childNodes).forEach(o=>t.appendChild(o)),a.replaceWith(t)})});document.addEventListener("click",function(e){let a;if(a=e.target.closest("[data-games-toggle-all]")){let t=a.getAttribute("aria-pressed")!=="true";a.setAttribute("aria-pressed",String(t)),a.setAttribute("data-indeterminate","false"),b("details",o=>{o.open=t})}else if(a=e.target.closest(".gaming-box"))S(a);else if(e.target.closest("[data-hide-game-info]")||e.target.matches(".gaming-details-dialog")){let t=document.getElementById("gaming-details-dialog");if(x(),!t)return;try{t.close()}catch{t.removeAttribute("open")}}else{if(e.target.closest('[type="checkbox"][readonly]'))return e.preventDefault(),!1;if(a=e.target.closest('[data-slot-checkbox="completed"]')){if(a.getAttribute("data-clean-value")==="true"){e.preventDefault(),alert("I wish I could unbeat a game and relive it for the first time. Alas, such delights are not meant for us mere mortals\u2026");return}if(p<v.length&&alert(v[p]),p>=v.length-1){p++,e.target.parentElement.querySelector('[data-slot-computed="completed"]').innerText=e.target.checked?"Yes":"No";return}p++,e.preventDefault()}}});document.addEventListener("toggle",function(e){let a;if(a=e?.target?.closest?.(".expander-group .expander")){let t=a.closest(".expander-group");if(!t||!t.id)return;let o=document.querySelector(`[data-games-toggle-all="${t.id}"]`),s=Array.from(t.querySelectorAll(".expander")),n=new Set(s.map(r=>r.open)).size===1;o.setAttribute("data-indeterminate",(!n).toString())}},{capture:!0});document.addEventListener("submit",function(e){if(e.target.closest("[data-gaming-toolbar]"))return e.preventDefault(),!1});document.addEventListener("change",function(e){let a;if(a=e.target.closest("[data-games-sizing]")){let t=a.value||"md",o={sm:"0.75em",md:"1em",lg:"1.25em"};b("[data-gaming-platform]",s=>s.style.fontSize=o[t])}});function E(e,a){let t=null,o;if(e?(o=-1,t=h.previousElementSibling||h.parentElement.lastElementChild):a&&(o=1,t=h.nextElementSibling||h.parentElement.firstElementChild),t){let s=t.querySelector(".gaming-spine-label");s&&S(s,o)}}document.addEventListener("keyup",function(e){let a;if(a=document.querySelector(".gaming-details-dialog")){a.matches("[open]")||x();let t=e.altKey||e.shiftKey||e.ctrlKey||e.metaKey,o=e.key==="ArrowLeft"||e.key==="ArrowRight";if(!h||t||!o)return;let s=()=>E(e.key==="ArrowLeft",e.key==="ArrowRight");if(window.matchMedia("(prefers-reduced-motion: no-preference)").matches){let u=e.key==="ArrowLeft"?1:e.key==="ArrowRight"?-1:0;a.getAnimations().forEach(n=>n.finish()),a.animate([{translate:`${u*160}px 0`,opacity:0}],{duration:300/2,easing:M}).finished.then(s)}else s()}});document.addEventListener("ckn:swipe",function(e){if(e.target.closest(".gaming-details-dialog")){let a=e.detail.swipeDirection.x;E(a==="right",a==="left")}});(()=>{let e=".gaming-details-dialog",a=0,t=0,o=0,s=0;document.addEventListener("touchstart",function(n){n.target.closest(e)&&(a=n.changedTouches[0].screenX,t=n.changedTouches[0].screenY)},!1),document.addEventListener("touchmove",function(n){let r=n.target.closest(e);if(r){let c=n.changedTouches[0].screenX-a,g=n.changedTouches[0].screenY-t,i=Math.abs(c),l=Math.abs(g);if(i<l)return;r.style.opacity=1-Math.min(Math.min(Math.max(0,i-160/2),160)/160,0),window.matchMedia("(prefers-reduced-motion: no-preference)").matches?r.style.translate=`${Math.max(-1*160,Math.min(160,c))}px 0`:r.style.translate=""}},!1),document.addEventListener("touchend",function(n){let r=n.target.closest(e);r&&(o=n.changedTouches[0].screenX,s=n.changedTouches[0].screenY,u(r))},!1);function u(n){let r=o-a,c=s-t,g=Math.abs(r),i=Math.abs(c),l=160/2,d=()=>{n.style.opacity="",n.style.translate=""};if(g<i||r===0&&c===0||g<l){window.matchMedia("(prefers-reduced-motion: no-preference)").matches?(n.getAnimations().forEach(f=>f.finish()),n.animate([{translate:"0 0",opacity:1}],{duration:300/2,easing:A}).finished.then(d)):d();return}let m=new CustomEvent("ckn:swipe",{bubbles:!0,detail:{swipeX:r,swipeY:c,swipeDirection:{x:{"-1":"left",0:null,1:"right"}[Math.sign(r)],y:{"-1":"up",0:null,1:"down"}[Math.sign(r)]}}});n.dispatchEvent(m)}})();})();
