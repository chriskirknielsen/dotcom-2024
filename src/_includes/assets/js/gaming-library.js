(()=>{function p(t,o){if(!t)throw new Error("Cannot convert to Cloudinary CDN: `url` value missing!");let e="https://res.cloudinary.com/chriskirknielsen";if(t.startsWith(e))return t;let a=`${e}/image/fetch`,i=String(o||""),c=encodeURI(t);return[a,i,c].filter(Boolean).join("/")}function y(t,o){return`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24" class="gaming-details-trophies-icon | inline-icon">
		<title>${o} trophies</title>
		<use xlink:href="#${t}" width="24" height="24"></use>
	</svg>`}function f(t,o){return t?`<ul class="gaming-details-trophies | inline-list" data-flow="run-in">
		${Object.keys(t).filter(e=>t[e]>0).map(e=>`<li><span class="gaming-details-trophies-badge" data-trophy-level="${e}">${y(o,e)} ${t[e]}</span></li>`).join("")}
	</ul>`:""}var d=(t,o,e=document)=>Array.from(e.querySelectorAll(t)).forEach(o),s=0,h=["I'm sorry, but that's not how that works.","If I have time I'll finish it.","Listen, if it's that great, you can let me know and I'll add it to my backlog.","Oh look, I'm literally about to beat the final level!","Screw it. You win. I'm done."],l=null;document.addEventListener("DOMContentLoaded",function(t){let o=e=>{e.hidden=!1};document.querySelector("[data-gaming-toolbar]").hidden=!1,d(".gaming-box",e=>{let a=document.createElement("button");e.getAttributeNames().forEach(i=>a.setAttribute(i,e.getAttribute(i))),a.type="button",a.classList.add("button-reset"),Array.from(e.childNodes).forEach(i=>a.appendChild(i)),e.replaceWith(a),a.addEventListener("mouseover",i=>o(a.querySelector(".gaming-front-art")),{once:!0}),a.addEventListener("touchstart",i=>o(a.querySelector(".gaming-front-art")),{once:!0}),a.addEventListener("focus",i=>o(a.querySelector(".gaming-front-art")),{once:!0}),a.addEventListener("click",i=>o(a.querySelector(".gaming-front-art")),{once:!0})})});document.addEventListener("click",function(t){let o;if(o=t.target.closest("[data-games-toggled]")){let e=o.getAttribute("aria-pressed")!=="true";o.setAttribute("aria-pressed",String(e)),d("details",a=>{a.open=e})}else if(o=t.target.closest(".gaming-box")){l=o.closest(".gaming-box-wrap");let e=JSON.parse(o.closest("[data-game]").getAttribute("data-game")),a=document.getElementById("gaming-details-dialog"),i=document.getElementById("gaming-details-dialog-template"),c=i.getAttribute("data-trophy-svg-id"),n=i.content.cloneNode(!0),u="gaming-details-dialog-title";if(d("[data-slot-show], [data-slot]:not([data-slot-show] *)",r=>{let g=r.getAttribute("data-slot-show")||r.getAttribute("data-slot"),m=e[g];r.hidden=Array.isArray(m)?m.length===0:!m},n),["title","edition","region","platform","dlc","year"].forEach(r=>{n.querySelector(`[data-slot="${r}"]`).innerText=e[r]}),n.querySelector('[data-slot="title"]').setAttribute("id",u),n.querySelector('[data-slot-computed="format"]').innerText=e.discs?e.discs>1?`${e.discs} discs`:"disc":"digital",e.completed===null?(n.querySelector('[data-slot-checkbox="completed"]').indeterminate=!0,n.querySelector('[data-slot-computed="completed"]').innerText="Partially"):(n.querySelector('[data-slot-checkbox="completed"]').checked=e.completed,n.querySelector('[data-slot-computed="completed"]').innerText=e.completed?"Yes":"No"),n.querySelector('[data-slot-checkbox="completed"]').setAttribute("data-clean-value",String(e.completed)),n.querySelector('[data-slot-computed="subItems"]').innerHTML=e.subItems.length>0?`<ul aria-label="Included games">${e.subItems.map(r=>`<li class="gaming-details-subitem">
								<p class="gaming-details-subitem-main">
									<input type="checkbox" aria-hidden="true" ${r.completed?"checked":""} readonly class="gaming-details-subitem-checkbox">
									<span class="gaming-details-subitem-label">
										${r.title}
										<span class="visually-hidden">${r.completed?"(completed)":"(not completed)"}</span>
									</span>
								</p>
								${r.trophyEarned?f(r.trophyEarned,c):""}
							</li>`).join("")}</ul>`:"",e.trophyIcon){let r=parseInt(n.querySelector('[data-slot-img="trophyIcon"]').getAttribute("height"),10),g=["PS3","PS4","PSV"].includes(e.platform)?r*(320/176):r;n.querySelector('[data-slot-img="trophyIcon"]').src=p(e.trophyIcon,`c_fit,h_${r}/q_80/f_auto`),n.querySelector('[data-slot-img="trophyIcon"]').setAttribute("width",g)}n.querySelector('[data-slot-computed="trophyEarned"]').innerHTML=e.trophyEarned?`<span class="gaming-details-trophies-percentage ${e.trophyProgress===100?"fontWeight-bold":""}">${e.trophyProgress}%:</span> ${f(e.trophyEarned,c)}`:"",Array.from(a.childNodes).forEach(r=>r.remove()),a.append(n),a.setAttribute("aria-labelledby",u);try{a.showModal()}catch{a.setAttribute("open","")}}else if(t.target.closest("[data-hide-game-info]")||t.target.matches(".gaming-details-dialog")){let e=document.getElementById("gaming-details-dialog");if(l=null,!e)return;try{e.close()}catch{e.removeAttribute("open")}}else{if(t.target.closest('[type="checkbox"][readonly]'))return t.preventDefault(),!1;if(o=t.target.closest('[data-slot-checkbox="completed"]')){if(o.getAttribute("data-clean-value")==="true"){t.preventDefault(),alert("I wish I could unbeat a game and relive it for the first time. Alas, such delights are not meant for us mere mortals\u2026");return}if(s<h.length&&alert(h[s]),s>=h.length-1){s++,t.target.parentElement.querySelector('[data-slot-computed="completed"]').innerText=t.target.checked?"Yes":"No";return}s++,t.preventDefault()}}});document.addEventListener("change",function(t){let o;if(o=t.target.closest("[data-games-sizing]")){let e=o.value||"md",a={sm:"0.75em",md:"1em",lg:"1.25em"};d("[data-gaming-platform]",i=>i.style.fontSize=a[e])}});document.addEventListener("keyup",function(t){let o;if(o=document.querySelector(".gaming-details-dialog")){if(o.matches("[open]")||(l=null),!l||t.altKey||t.shiftKey||t.ctrlKey||t.metaKey)return;let e=null;if(t.key==="ArrowLeft"?e=l.previousElementSibling||l.parentElement.lastElementChild:t.key==="ArrowRight"&&(e=l.nextElementSibling||l.parentElement.firstElementChild),e){let a=e.querySelector(".gaming-spine-label");a&&a.click()}}});})();
